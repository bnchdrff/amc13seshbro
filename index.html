<html>
<head>
<link type="text/css" rel="stylesheet" media="all" href="seshbro.css" />
<script type="text/javascript" src="http://dev.talk070512.phy3.thermitic.net/sites/talk070512.phy3.thermitic.net/modules/contrib/jquery_update/replace/jquery/1.7/jquery.js"></script>
<script type="text/javascript" src="lib/json2.js"></script>
<script type="text/javascript" src="lib/underscore.js"></script>
<script type="text/javascript" src="lib/backbone.js"></script>
<script type="text/javascript" src="lib/backbone-relational.js"></script>
<script type="text/javascript" src="lib/doT/doT.js"></script>
<script type="text/x-dot-template" id="seshbro-tpl-seshbro">
  <div id="categories"></div><div id="seshes"></div>
</script>
<script type="text/x-dot-template" id="seshbro-tpl-categories">
  {{##def.checkbox:
    <li>
      <input type="checkbox" value="{{=the.get("tid")}}" id="term-{{=the.get("tid")}}" />
      <label for="term-{{=the.get("tid")}}">
        {{=the.get("name")}}
      </label>
    </li>
  #}}
  {{##def.blockcheckbox:
    <li data-parent-tid="{{=the.get("parents")[0]}}">
      <input type="checkbox" value="{{=the.get("tid")}}" id="term-{{=the.get("tid")}}" />
      <label for="term-{{=the.get("tid")}}">
        {{=the.get("name")}}
      </label>
    </li>
  #}}
  {{##def.controls:
    <div class="controls">
      <a href="#" id="select-none">Select none</a>
    </div>
  #}}
  {{##def.categories:
  <div class="categories t_ps_ng">
    <div class="category">
      <h3>Tracks</h3>
      <ul>
        {{ for (var tid in it.t_ps_ng.t) { }}
          {{ var the = it.t_ps_ng.t[tid]; }}
          {{#def.checkbox}}
        {{ } }}
      </ul>
    </div>
    <div class="category">
      <h3>Practice Spaces</h3>
      <ul>
        {{ for (var tid in it.t_ps_ng.ps) { }}
          {{ var the = it.t_ps_ng.ps[tid]; }}
          {{#def.checkbox}}
        {{ } }}
      </ul>
    </div>
    <div class="category">
      <h3>Network Gatherings</h3>
      <ul>
        {{ for (var tid in it.t_ps_ng.ng) { }}
          {{ var the = it.t_ps_ng.ng[tid]; }}
          {{#def.checkbox}}
        {{ } }}
        <pre>list of NGs here!</pre>
      </ul>
    </div>
  </div>
  <div class="categories locations">
    <div class="category location">
      <h3>Places</h3>
      <ul>
        {{ for (var tid in it.locations) { }}
          {{ var the = it.locations[tid]; }}
          {{#def.checkbox}}
        {{ } }}
      </ul>
    </div>
  </div>
  <div class="categories daytime">
    <div class="category thursday">
      <h3>Ongoing </h3>
      <ul>
        {{ for (var tid in it.blocks.ongoing) { }}
          {{ var the = it.blocks.ongoing[tid]; }}
          {{#def.blockcheckbox}}
        {{ } }}
      </ul>
      <h3>Thursday</h3>
      <ul>
        {{ for (var tid in it.blocks.thursday) { }}
          {{ var the = it.blocks.thursday[tid]; }}
          {{#def.blockcheckbox}}
        {{ } }}
      </ul>
    </div>
    <div class="category friday">
      <h3>Friday</h3>
      <ul>
        {{ for (var tid in it.blocks.friday) { }}
          {{ var the = it.blocks.friday[tid]; }}
          {{#def.blockcheckbox}}
        {{ } }}
      </ul>
    </div>
    <div class="category saturday">
      <h3>Saturday</h3>
      <ul>
        {{ for (var tid in it.blocks.saturday) { }}
          {{ var the = it.blocks.saturday[tid]; }}
          {{#def.blockcheckbox}}
        {{ } }}
      </ul>
    </div>
    <div class="category sunday">
      <h3>Sunday</h3>
      <ul>
        {{ for (var tid in it.blocks.sunday) { }}
          {{ var the = it.blocks.sunday[tid]; }}
          {{#def.blockcheckbox}}
        {{ } }}
      </ul>
    </div>
  </div>
  #}}
  {{#def.controls}}
  {{#def.categories}}
</script>
<script type="text/x-dot-template" id="seshbro-tpl-seshes">
  <h2>Sessions</h2>
  <ul class="seshes">
    {{ for (var i = -1, l = it.seshes.length; ++i < l;) { var sesh = it.seshes[i]; }}
      <li class="session"{{
        var term = app.seshbro.categoriesView.collection.get( sesh.field_2012sched[0].value );
        }}{{? term && term.get("parents") }} data-day="{{=term.get("parents")[0]}}"{{?}}>
        <h4><a href="http://talk.alliedmedia.org/{{=sesh.path}}">{{=sesh.title}}</a></h4>
        <span class="block">
          {{? term !== undefined }}{{=term.get("name")}}{{?}}
        </span>
        <span class="location">
          {{
          var term = app.seshbro.categoriesView.collection.get(sesh.field_2012loc[0].value);
          }}
          {{? term !== undefined }}{{=term.get("name")}}{{?}}
        </span>
        <span class="explev">
          {{
          var term = app.seshbro.categoriesView.collection.get(sesh.field_2012explev[0].value);
          }}
          {{? term !== undefined }}{{=term.get("name")}}{{?}}
        </span>
        <span class="kid">
          {{
          var term = app.seshbro.categoriesView.collection.get(sesh.field_2012kid[0].value);
          }}
          {{? term !== undefined }}{{=term.get("name")}}{{?}}
        </span>
        {{? sesh.field_2012hash[0] }}
          <span class="hash">
            #AMC2012 #{{=sesh.field_2012hash[0].value}}
          </span>
        {{?}}
        {{? sesh.field_2012tweetable[0] }}
          <p class="tweetable">
            {{=sesh.field_2012tweetable[0].value}}
          </p>
        {{?}}
        {{? sesh.field_2012sesh_shortdesc[0] }}
          <p class="short">
            {{=sesh.field_2012sesh_shortdesc[0].value}}
          </p>
        {{?}}
        {{? sesh.field_2012sesh_presname[0].value !== null }}
          <div class="presenters">
            {{
            var preses = _.zip( sesh.field_2012sesh_presname, sesh.field_2012sesh_presorg, sesh.field_2012sesh_presbio, sesh.field_2012sesh_prestalk );
            for ( var presesi = 0, presesl = preses.length; presesi < preses.length; presesi++ ) {
            }}
              {{? preses[presesi][0].value.length > 2 }}
              <div>
                {{=preses[presesi][0].value}}{{? preses[presesi][1].value.length > 2 }}, {{=preses[presesi][1].value}}{{?}}
                {{? preses[presesi][2].value.length > 2 }}
                <div>
                  {{=preses[presesi][2].value}}
                  {{? preses[presesi][3] && preses[presesi][3].uid > 0 }}
                    <a href="http://talk.alliedmedia.org/user/{{=preses[presesi][3].uid}}">(profile)</a>
                  {{?}}
                </div>
                {{?}}
              </div>
              {{?}}
            {{ } }}
          </div>
        {{?}}
      </li>
    {{ } }}
  </ul>
</script>
<script type="text/javascript" src="amc12seshbrowser.js"></script>
</head>
<body>
  <div id="app">
  </div>
</body>
</html>
